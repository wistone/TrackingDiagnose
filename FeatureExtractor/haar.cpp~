#include "mex.h"

/*
for j = 1: M
    for k = 1:maxNumRect
        ht = round(hMin + py(j, k) * h);
        wl = round(wMin + px(j, k) * w);
        hb = round(hMin + ph(j, k) * h);
        wr = round(wMin + pw(j, k) * w);
        features(j, i) = features(j, i) + pwt(j, k) * ...
            (integralIm(ht, wl) + integralIm(hb, wr) - integralIm(ht, wr) - integralIm(hb, wl));
    end
end
*/

void mexFunction( int nlhs, mxArray *plhs[], int nrhs, const mxArray*prhs[]){ 
	double *hMin = mxGetPr(prhs[0]); 
    double *wMin = mxGetPr(prhs[1]);
    double *h = mxGetPr(prhs[2]); 
    double *w = mxGetPr(prhs[3]);
    double *py = mxGetPr(prhs[4]);
    double *px = mxGetPr(prhs[5]);
    double *ph = mxGetPr(prhs[6]);
    double *pw = mxGetPr(prhs[7]);
    double *pwt = mxGetPr(prhs[8]);
    double *integralIm = mxGetPr(prhs[9]);
    
    int M = mxGetM(py);
    int N = mxGetN(py);
    int imh = mxGetM(integralIm);
    int imw = mxGetN(integralIm);
    
    for (int j = 0; j < M; j++){
        for (int k = 0; k < N; k++){
            int ht = round(hMin[0] + py[M * k + j] * h[0]);
            int wl = round(wMin[0] + px[M * k + j] * w[0]);
        }
    }
}